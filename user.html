<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Navbar -->
  <div class="navbar">
    <div class="logo">Face Animation</div>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="#" class="active">User Dashboard</a></li>
      <li><a href="login.html">Logout</a></li>
    </ul>
  </div>

  <!-- User Dashboard -->
  <section class="user-dashboard">
    <div class="dashboard-container">
      <h2>Welcome, User</h2>
      <p>Manage your avatars, animations, and account settings all in one place.</p>

      <!-- Profile -->
      <div class="profile-card">
        <h3>👤 User Profile</h3>
        <p><strong>Username:</strong> <span id="username">JohnDoe</span></p>
        <p><strong>Email:</strong> <span id="email">johndoe@email.com</span></p>
        <div class="profile-actions">
          <button class="btn small-btn" id="editProfileBtn">Edit Profile</button>
          <button class="btn danger-btn small-btn" id="deleteAccountBtn">Delete Account</button>
        </div>
        <div id="editProfileForm" style="display:none; margin-top:10px;">
          <input type="text" id="newUsername" placeholder="New Username">
          <input type="email" id="newEmail" placeholder="New Email">
          <div class="profile-actions">
            <button class="btn small-btn" id="saveProfileBtn">Save</button>
            <button class="btn small-btn" id="cancelEditBtn">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Avatar Management -->
      <div class="avatar-management">
        <h3>🖼️ Manage Avatars</h3>
        <form class="upload-form" id="avatarForm">
          <label for="avatarUpload">Upload Avatar:</label>
          <input type="file" id="avatarUpload" accept="image/*">
          <button type="button" class="btn" id="uploadAvatarBtn">Upload</button>
        </form>

        <div class="avatar-library">
          <h4>Your Avatars</h4>
          <div class="avatar-list" id="avatarList">
            <!-- Avatars will be dynamically added here -->
          </div>
        </div>
      </div>

      <!-- Animation Generator -->
      <div class="animation-generator">
        <h3>🎬 Generate Animation</h3>
        <form id="animationForm">
          <label for="expression">Choose Expression:</label>
          <select id="expressionSelect">
            <option value="">--Choose Expression--</option>
            <option value="smile">😊 Smile</option>
            <option value="angry">😡 Angry</option>
            <option value="surprised">😲 Surprised</option>
            <option value="sad">😢 Sad</option>
          </select>

          <label for="avatarSelect">Select Avatar:</label>
          <select id="avatarSelect">
            <option value="">--Select Avatar--</option>
          </select>

          <button type="button" class="btn" id="generateBtn">Generate</button>
        </form>

        <div class="animation-preview" id="animationPreview" style="display:none;">
          <h4>Preview Animation</h4>
          <video id="previewVideo" controls></video>
          <div class="profile-actions">
            <button class="btn small-btn" id="saveAnimationBtn">Save Animation</button>
            <button class="btn small-btn danger-btn" id="cancelPreviewBtn">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Animation History -->
      <div class="animation-history">
        <h3>📂 Your Animations</h3>
        <div class="animation-list" id="animationList">
          <!-- Animations will be dynamically added here -->
        </div>
      </div>

      <!-- Subscription Section -->
      <div class="subscription-section">
        <h3>💳 Upgrade to Subscriber / Paid User</h3>
        <p>Unlock premium features such as unlimited animations, advanced expressions, and higher-quality rendering by subscribing.</p>
        <form class="subscription-form">
          <label for="plan">Choose a Plan:</label>
          <select id="plan">
            <option value="monthly">Monthly - $9.99</option>
            <option value="yearly">Yearly - $99.99</option>
          </select>
          <button type="submit" class="btn">Subscribe Now</button>
        </form>
      </div>

    </div>
  </section>

  <!-- Footer -->
  <div class="footer">
    <p>&copy; 2025 Face Animation. All Rights Reserved.</p>
  </div>

<script>
  // Profile edit functionality
  const editProfileBtn = document.getElementById('editProfileBtn');
  const editProfileForm = document.getElementById('editProfileForm');
  const cancelEditBtn = document.getElementById('cancelEditBtn');
  const saveProfileBtn = document.getElementById('saveProfileBtn');

  editProfileBtn.onclick = () => editProfileForm.style.display = 'block';
  cancelEditBtn.onclick = () => editProfileForm.style.display = 'none';
  saveProfileBtn.onclick = () => {
    const newUsername = document.getElementById('newUsername').value;
    const newEmail = document.getElementById('newEmail').value;
    if(newUsername) document.getElementById('username').innerText = newUsername;
    if(newEmail) document.getElementById('email').innerText = newEmail;
    editProfileForm.style.display = 'none';
  }

  // Delete account
  const deleteAccountBtn = document.getElementById('deleteAccountBtn');
  deleteAccountBtn.onclick = () => alert('Account deletion triggered');

  // Avatar management
  const avatarUpload = document.getElementById('avatarUpload');
  const uploadAvatarBtn = document.getElementById('uploadAvatarBtn');
  const avatarList = document.getElementById('avatarList');
  const avatarSelect = document.getElementById('avatarSelect');

  uploadAvatarBtn.onclick = () => {
    if(avatarUpload.files.length === 0) return alert('Select an avatar to upload');
    const file = avatarUpload.files[0];
    const reader = new FileReader();
    reader.onload = function(e) {
      const avatarDiv = document.createElement('div');
      avatarDiv.className = 'avatar-item';
      avatarDiv.innerHTML = `
        <img src="${e.target.result}" alt="Avatar">
        <div class="profile-actions">
          <button class="btn small-btn selectAvatarBtn">Select</button>
          <button class="btn small-btn danger-btn deleteAvatarBtn">Delete</button>
        </div>`;
      avatarList.appendChild(avatarDiv);

      // Add to avatar dropdown
      const option = document.createElement('option');
      option.value = e.target.result;
      option.text = file.name;
      avatarSelect.add(option);

      // Delete avatar
      avatarDiv.querySelector('.deleteAvatarBtn').onclick = () => {
        avatarDiv.remove();
        option.remove();
      };

      // Select avatar
      avatarDiv.querySelector('.selectAvatarBtn').onclick = () => {
        avatarSelect.value = option.value;
      };
    };
    reader.readAsDataURL(file);
    avatarUpload.value = '';
  };

  // Animation generation
  const generateBtn = document.getElementById('generateBtn');
  const animationPreview = document.getElementById('animationPreview');
  const previewVideo = document.getElementById('previewVideo');
  const saveAnimationBtn = document.getElementById('saveAnimationBtn');
  const cancelPreviewBtn = document.getElementById('cancelPreviewBtn');
  const animationList = document.getElementById('animationList');

  generateBtn.onclick = () => {
    const avatarSrc = avatarSelect.value;
    const expression = document.getElementById('expressionSelect').value;
    if(!avatarSrc || !expression) return alert('Select avatar and expression');
    previewVideo.src = avatarSrc; // placeholder for actual animation
    animationPreview.style.display = 'block';
  }

  cancelPreviewBtn.onclick = () => animationPreview.style.display = 'none';

  saveAnimationBtn.onclick = () => {
    const videoSrc = previewVideo.src;
    const animDiv = document.createElement('div');
    animDiv.className = 'animation-item';
    animDiv.innerHTML = `
      <video src="${videoSrc}" controls></video>
      <button class="btn small-btn danger-btn deleteAnimationBtn">Delete</button>`;
    animationList.appendChild(animDiv);

    animDiv.querySelector('.deleteAnimationBtn').onclick = () => animDiv.remove();

    animationPreview.style.display = 'none';
  }
</script>

</body>
</html>
